Kartoffeln waschen, schälen, in Scheiben schneiden und in Salzwasser 10 min garen.
Den Brokkoli waschen, schälen, in Röschen teilen und in kochendem Salzwasser in 8 min bissfest garen, in kaltem Wasser kurz abschrecken und in einem Sieb abtropfen lassen. damit er nicht weiter gart.
In der Zwischenzeit die Zwiebel und den Schinken klein schneiden und in einem Topf oder einer Pfanne in etwas Öl anschwitzen. Dann 1 schwach gehäuften EL Mehl dazugeben, umrühren und die Sahne sowie die Milch dazugießen. Weiter umrühren, aufkochen lassen und mit Salz, Pfeffer und Muskat abschmecken. Wenn die Soße zu dickflüssig wird, noch etwas Brokkolisud dazugeben (oder auch Gemüsebrühe oder Wasser).
Backofen auf 180 bis 200 °C Ober-/Unterhitze vorheizen.
Kartoffeln und Brokkoli in eine mit Öl ausgepinselte Auflaufform geben, die Schinken-Zwiebel-Sahne-Soße darüber gießen und den geriebenen Käse darauf verteilen.
Im heißen Backofen ca. 20 min überbacken.