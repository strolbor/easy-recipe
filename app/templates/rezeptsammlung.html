{% extends "base.html" %}

{% block app_content %}

  <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>

<form name="rezeptsammlung" id="rezeptsammlung" method="POST">
{{ form.csrf_token }}

    <table class="table-light" align="center" width="70%"><tr>
        <td width="10%" bgcolor="#E7E7E7" style="vertical-align: top">
            <p><b>Angewandte Filter:</b> </p>
            <p><input type="checkbox" checked>Leicht </p>
            <p><input type="checkbox" checked>Fleisch </p>
        </td>
        <td><div style="width:80%">
            <table width="100%" style="border:1px solid gray; border-collape:collapse;" > <!-- Filteroptionen und Suche Button -->
                <tr>
                    <td width="33%">
                        {{form.rezeptnamen(width="90%", align="center")}}
                    </td>
                    <td width="33%">
                        {{form.rezeptkategorien(width="90%", align="center")}}
                    </td>
                    <td width="33%">
                        <p>Maximale Zutaten:
                        <p>{{form.maxZutaten(width="90%", align="center")}}
                    </td>
                </tr>
                <tr>
                    <td width="33%"></td>

                    <td width="33%"></td>

                    <td width="33%">
                        {{form.btnSuchen(class="btn btn-primary", width="100%")}}
                    </td>
                </tr>
                <!-- Rezeptvorschläge: -->
                {% set anzRezepte = rezeptRankings|length %}
                <tr>
                    <td colspan="3">
                        <p></p>
                        <p><h3><b>Rezeptvorschläge ({{anzRezepte}})</b></h3></p>
                        <p></p>
                        <p></p>


{%for i in range(0, anzRezepte) %}
    {% if i < anzRezepte %}

            {% set cardwidth = "18rem" %}
            {% set cardheight = 20 %}
            <div class="card" style="width: {{cardwidth}}; height: {{cardheight}}rem; float:left;">
                <a href="{{ url_for('rezeptanzeige',ids=rezeptRankings[i].rid)}}">
                <img src="/ctl/download/{{rezeptRankings[i].bild}}" class="card-img-top" alt="Kein Bild" style="width: {{cardwidth}};">
                </a>
                {% set bodyheight = cardheight / 5 * 2 %}
                <div class="card-body" style="overflow-y:scroll;height:{{bodyheight}}rem">
                    <h5 class="card-title">{{ rezeptRankings[i].name }}</h5>
                    <i class="card-text">{{ rezeptRankings[i].vorhandeneZutatenNamen }}, {{ rezeptRankings[i].fehlendeZutatenNamen }}</i>
                </div>
            </div>

    {%endif %}
{% endfor %}

                    </td>
                </tr>
            </table>
        </div></td>
    </tr></table>
</form>


    <script>
        $(document).ready(function() {
            $('#rezeptnamen').select2({  // init Select2 on form's rezeptnamen field
                placeholder: "{{ form.rezeptnamen.label.text }}",
                allowClear: true,
                "width": "90%"
            });
            $('#rezeptkategorien').select2({  // init Select2 on form's rezeptnamen field
                placeholder: "{{ form.rezeptkategorien.label.text }}",
                allowClear: true,
                "width": "90%"
            });
        });
    </script>

{% endblock %}
